<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced CSP Memory Portal - AI Memory Management</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 2px solid #9c27b0;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(156, 39, 176, 0.3);
        }

        .header h1 {
            font-size: 1.8rem;
            background: linear-gradient(45deg, #9c27b0, #e91e63);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .memory-stats {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #9c27b0;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #cccccc;
        }

        /* Main Layout */
        .main-container {
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            min-height: calc(100vh - 80px);
        }

        /* Left Sidebar */
        .left-sidebar {
            background: rgba(0, 0, 0, 0.8);
            border-right: 1px solid rgba(156, 39, 176, 0.3);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .sidebar-section {
            padding: 1.5rem 1rem;
            border-bottom: 1px solid rgba(156, 39, 176, 0.2);
        }

        .sidebar-section h3 {
            color: #9c27b0;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            margin: 0.25rem 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            font-size: 0.9rem;
        }

        .nav-item:hover {
            background: rgba(156, 39, 176, 0.1);
            border-color: #9c27b0;
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(156, 39, 176, 0.2);
            border-color: #9c27b0;
        }

        .nav-icon {
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }

        /* Search Section */
        .search-section {
            padding: 1rem;
            background: rgba(156, 39, 176, 0.1);
        }

        .search-container {
            position: relative;
            margin-bottom: 1rem;
        }

        .search-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #9c27b0;
            border-radius: 25px;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            color: #ffffff;
            font-size: 0.9rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #e91e63;
            box-shadow: 0 0 15px rgba(233, 30, 99, 0.3);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9c27b0;
            font-size: 1.1rem;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .filter-tag {
            background: rgba(156, 39, 176, 0.2);
            border: 1px solid #9c27b0;
            border-radius: 15px;
            padding: 0.3rem 0.8rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-tag:hover, .filter-tag.active {
            background: rgba(156, 39, 176, 0.4);
            transform: scale(1.05);
        }

        /* Central Content */
        .content-area {
            padding: 2rem;
            overflow-y: auto;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Memory Cards */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .memory-card {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .memory-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #9c27b0, #e91e63);
        }

        .memory-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.3);
            border-color: #e91e63;
        }

        .memory-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .memory-title {
            font-size: 1.1rem;
            color: #9c27b0;
            font-weight: bold;
            margin-bottom: 0.3rem;
        }

        .memory-meta {
            font-size: 0.8rem;
            color: #cccccc;
        }

        .memory-actions {
            display: flex;
            gap: 0.5rem;
        }

        .memory-content {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
            line-height: 1.4;
            max-height: 150px;
            overflow-y: auto;
        }

        .memory-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .memory-tag {
            background: rgba(156, 39, 176, 0.2);
            border: 1px solid #9c27b0;
            border-radius: 12px;
            padding: 0.25rem 0.75rem;
            font-size: 0.75rem;
            color: #e91e63;
        }

        .memory-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(156, 39, 176, 0.2);
            font-size: 0.8rem;
            color: #cccccc;
        }

        /* Timeline View */
        .timeline-container {
            position: relative;
            padding: 2rem 0;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #9c27b0, #e91e63);
            transform: translateX(-50%);
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin: 2rem 0;
            position: relative;
        }

        .timeline-item:nth-child(even) {
            flex-direction: row-reverse;
        }

        .timeline-content {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 0 2rem;
            width: calc(50% - 3rem);
            backdrop-filter: blur(10px);
        }

        .timeline-marker {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #9c27b0;
            border-radius: 50%;
            border: 3px solid #ffffff;
            z-index: 2;
        }

        /* Knowledge Graph */
        .knowledge-graph {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            height: 500px;
            position: relative;
            overflow: hidden;
        }

        .graph-node {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, #9c27b0, #e91e63);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-size: 0.8rem;
            color: white;
        }

        .graph-node:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(156, 39, 176, 0.7);
            z-index: 10;
        }

        .graph-connection {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, rgba(156, 39, 176, 0.6), rgba(233, 30, 99, 0.6));
            transform-origin: left center;
            z-index: 1;
        }

        /* Right Sidebar */
        .right-sidebar {
            background: rgba(0, 0, 0, 0.8);
            border-left: 1px solid rgba(156, 39, 176, 0.3);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .details-panel {
            padding: 1.5rem;
        }

        .details-panel h3 {
            color: #9c27b0;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-group {
            margin-bottom: 1.5rem;
            background: rgba(156, 39, 176, 0.05);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid rgba(156, 39, 176, 0.2);
        }

        .detail-group h4 {
            color: #e91e63;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .detail-label {
            color: #cccccc;
        }

        .detail-value {
            color: #ffffff;
            font-weight: 500;
        }

        /* Analytics Charts */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .chart-container {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(156, 39, 176, 0.2);
        }

        .chart-title {
            color: #9c27b0;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .chart-canvas {
            height: 300px;
        }

        /* Buttons */
        .btn {
            background: rgba(156, 39, 176, 0.2);
            border: 1px solid #9c27b0;
            color: #ffffff;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: rgba(156, 39, 176, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.3);
        }

        .btn-primary {
            background: linear-gradient(45deg, #9c27b0, #e91e63);
            border: none;
        }

        .btn-secondary {
            background: rgba(108, 117, 125, 0.3);
            border-color: #6c757d;
        }

        .btn-small {
            padding: 0.4rem 0.8rem;
            font-size: 0.75rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid #9c27b0;
            border-radius: 15px;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(156, 39, 176, 0.3);
        }

        .modal-title {
            font-size: 1.4rem;
            color: #9c27b0;
        }

        .close-btn {
            background: none;
            border: none;
            color: #9c27b0;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            color: #e91e63;
            transform: scale(1.2);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: #9c27b0;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #9c27b0;
            border-radius: 6px;
            padding: 0.75rem;
            color: #ffffff;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #e91e63;
            box-shadow: 0 0 10px rgba(233, 30, 99, 0.3);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* Progress Bars */
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            height: 20px;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9c27b0, #e91e63);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        /* Data Tables */
        .data-table {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .table-header {
            background: rgba(156, 39, 176, 0.2);
            padding: 1rem;
            border-bottom: 1px solid rgba(156, 39, 176, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #9c27b0;
        }

        .table-content {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(156, 39, 176, 0.1);
            color: #9c27b0;
            font-weight: bold;
            font-size: 0.9rem;
        }

        td {
            color: #cccccc;
            font-size: 0.85rem;
        }

        tr:hover {
            background: rgba(156, 39, 176, 0.05);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive Design */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 280px 1fr 300px;
            }
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 250px 1fr 250px;
            }
            
            .memory-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .left-sidebar, .right-sidebar {
                display: none;
            }
            
            .content-area {
                padding: 1rem;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .memory-grid {
                grid-template-columns: 1fr;
            }
            
            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>üß† Enhanced CSP Memory Portal</h1>
        <div class="header-controls">
            <div class="memory-stats">
                <div class="stat-item">
                    <div class="stat-value" id="total-memories">127,482</div>
                    <div class="stat-label">Total Memories</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="memory-size">2.4TB</div>
                    <div class="stat-label">Storage Used</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="active-conversations">1,247</div>
                    <div class="stat-label">Active Sessions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="knowledge-nodes">89,342</div>
                    <div class="stat-label">Knowledge Nodes</div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="openModal('export-modal')">üì§ Export Data</button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <div class="left-sidebar">
            <!-- Search Section -->
            <div class="search-section">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" class="search-input" placeholder="Search memories, conversations, knowledge..." id="memory-search">
                </div>
                <div class="filter-options">
                    <div class="filter-tag active" data-filter="all">All</div>
                    <div class="filter-tag" data-filter="conversations">Conversations</div>
                    <div class="filter-tag" data-filter="knowledge">Knowledge</div>
                    <div class="filter-tag" data-filter="patterns">Patterns</div>
                    <div class="filter-tag" data-filter="recent">Recent</div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="sidebar-section">
                <h3>üìä Memory Views</h3>
                <div class="nav-item active" onclick="showSection('overview')">
                    <span class="nav-icon">üè†</span>
                    <span>Overview</span>
                </div>
                <div class="nav-item" onclick="showSection('conversations')">
                    <span class="nav-icon">üí¨</span>
                    <span>Conversations</span>
                </div>
                <div class="nav-item" onclick="showSection('knowledge-graph')">
                    <span class="nav-icon">üï∏Ô∏è</span>
                    <span>Knowledge Graph</span>
                </div>
                <div class="nav-item" onclick="showSection('timeline')">
                    <span class="nav-icon">üìÖ</span>
                    <span>Timeline View</span>
                </div>
                <div class="nav-item" onclick="showSection('analytics')">
                    <span class="nav-icon">üìà</span>
                    <span>Analytics</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>üîß Memory Management</h3>
                <div class="nav-item" onclick="showSection('storage')">
                    <span class="nav-icon">üíæ</span>
                    <span>Storage Management</span>
                </div>
                <div class="nav-item" onclick="showSection('retention')">
                    <span class="nav-icon">‚è∞</span>
                    <span>Retention Policies</span>
                </div>
                <div class="nav-item" onclick="showSection('privacy')">
                    <span class="nav-icon">üîí</span>
                    <span>Privacy Controls</span>
                </div>
                <div class="nav-item" onclick="showSection('backup')">
                    <span class="nav-icon">üîÑ</span>
                    <span>Backup & Restore</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>üéØ AI Features</h3>
                <div class="nav-item" onclick="showSection('patterns')">
                    <span class="nav-icon">üîç</span>
                    <span>Pattern Recognition</span>
                </div>
                <div class="nav-item" onclick="showSection('clustering')">
                    <span class="nav-icon">üé≠</span>
                    <span>Memory Clustering</span>
                </div>
                <div class="nav-item" onclick="showSection('insights')">
                    <span class="nav-icon">üí°</span>
                    <span>AI Insights</span>
                </div>
                <div class="nav-item" onclick="showSection('predictions')">
                    <span class="nav-icon">üîÆ</span>
                    <span>Predictions</span>
                </div>
            </div>
        </div>

        <!-- Central Content -->
        <div class="content-area">
            <!-- Overview Section -->
            <div id="overview" class="content-section active fade-in">
                <h2 style="color: #9c27b0; margin-bottom: 2rem; font-size: 2rem;">Memory Overview Dashboard</h2>
                
                <div class="analytics-grid">
                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">üìà Memory Growth Trends</div>
                            <button class="btn btn-small">‚öôÔ∏è Configure</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="memoryGrowthChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">üéØ Memory Types Distribution</div>
                            <button class="btn btn-small">üìä Details</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="memoryTypesChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">‚ö° Memory Access Patterns</div>
                            <button class="btn btn-small">üîç Analyze</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="accessPatternsChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">üß† AI Agent Memory Usage</div>
                            <button class="btn btn-small">üë• Agents</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="agentUsageChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">üî• Recent Memory Activity</div>
                        <div>
                            <button class="btn btn-small">üîÑ Refresh</button>
                            <button class="btn btn-small">üìä Export</button>
                        </div>
                    </div>
                    <div class="table-content">
                        <table>
                            <thead>
                                <tr>
                                    <th>Timestamp</th>
                                    <th>Memory Type</th>
                                    <th>Agent</th>
                                    <th>Content Preview</th>
                                    <th>Size</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recent-activity">
                                <!-- Dynamic content -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Conversations Section -->
            <div id="conversations" class="content-section">
                <h2 style="color: #9c27b0; margin-bottom: 2rem;">üí¨ Conversation Memories</h2>
                
                <div class="memory-grid" id="conversations-grid">
                    <!-- Dynamic conversation cards -->
                </div>
            </div>

            <!-- Knowledge Graph Section -->
            <div id="knowledge-graph" class="content-section">
                <h2 style="color: #9c27b0; margin-bottom: 2rem;">üï∏Ô∏è Knowledge Graph Visualization</h2>
                
                <div class="knowledge-graph" id="knowledge-graph-container">
                    <!-- Dynamic knowledge graph -->
                </div>
                
                <div class="data-table" style="margin-top: 2rem;">
                    <div class="table-header">
                        <div class="table-title">üîó Knowledge Connections</div>
                        <div>
                            <button class="btn btn-small">‚ûï Add Node</button>
                            <button class="btn btn-small">üîó Add Connection</button>
                        </div>
                    </div>
                    <div class="table-content">
                        <table>
                            <thead>
                                <tr>
                                    <th>Node ID</th>
                                    <th>Concept</th>
                                    <th>Connections</th>
                                    <th>Strength</th>
                                    <th>Last Updated</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>KN-001</td>
                                    <td>Natural Language Processing</td>
                                    <td>47</td>
                                    <td><span style="color: #00ff88">High</span></td>
                                    <td>2025-06-20 14:23</td>
                                    <td><button class="btn btn-small">üîç Explore</button></td>
                                </tr>
                                <tr>
                                    <td>KN-002</td>
                                    <td>Machine Learning Models</td>
                                    <td>89</td>
                                    <td><span style="color: #00ff88">Very High</span></td>
                                    <td>2025-06-20 13:45</td>
                                    <td><button class="btn btn-small">üîç Explore</button></td>
                                </tr>
                                <tr>
                                    <td>KN-003</td>
                                    <td>Agent Communication</td>
                                    <td>34</td>
                                    <td><span style="color: #ffaa00">Medium</span></td>
                                    <td>2025-06-20 12:10</td>
                                    <td><button class="btn btn-small">üîç Explore</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Timeline Section -->
            <div id="timeline" class="content-section">
                <h2 style="color: #9c27b0; margin-bottom: 2rem;">üìÖ Memory Timeline</h2>
                
                <div class="timeline-container" id="timeline-container">
                    <!-- Dynamic timeline items -->
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analytics" class="content-section">
                <h2 style="color: #9c27b0; margin-bottom: 2rem;">üìà Memory Analytics</h2>
                
                <div class="analytics-grid">
                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">üìä Memory Quality Metrics</div>
                            <button class="btn btn-small">‚öôÔ∏è Configure</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="qualityMetricsChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">üéØ Retrieval Accuracy</div>
                            <button class="btn btn-small">üìà Optimize</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="accuracyChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">‚ö° Performance Metrics</div>
                            <button class="btn btn-small">üîß Tune</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="chart-title">üîç Search Efficiency</div>
                            <button class="btn btn-small">üìä Report</button>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="searchChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Storage Management Section -->
            <div id="storage" class="content-section">
                <h2 style="color: #9c27b0; margin-bottom: 2rem;">üíæ Storage Management</h2>
                
                <div class="analytics-grid">
                    <div class="detail-group">
                        <h4>üíΩ Storage Overview</h4>
                        <div class="detail-row">
                            <span class="detail-label">Total Capacity:</span>
                            <span class="detail-value">10.0 TB</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Used Space:</span>
                            <span class="detail-value">2.4 TB (24%)</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 24%;">24%</div>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Available:</span>
                            <span class="detail-value">7.6 TB</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Growth Rate:</span>
                            <span class="detail-value">+45 GB/day</span>
                        </div>
                    </div>

                    <div class="detail-group">
                        <h4>üìà Storage Trends</h4>
                        <div class="detail-row">
                            <span class="detail-label">Conversations:</span>
                            <span class="detail-value">1.2 TB (50%)</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Knowledge Base:</span>
                            <span class="detail-value">0.8 TB (33%)</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Analytics Data:</span>
                            <span class="detail-value">0.3 TB (12%)</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Indexes:</span>
                            <span class="detail-value">0.1 TB (5%)</span>
                        </div>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">üìÅ Storage Breakdown by Category</div>
                        <div>
                            <button class="btn btn-small">üóÇÔ∏è Organize</button>
                            <button class="btn btn-small">üóëÔ∏è Cleanup</button>
                        </div>
                    </div>
                    <div class="table-content">
                        <table>
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Size</th>
                                    <th>Files</th>
                                    <th>Last Modified</th>
                                    <th>Compression</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>üí¨ Conversations</td>
                                    <td>1.2 TB</td>
                                    <td>89,342</td>
                                    <td>2025-06-20 14:30</td>
                                    <td>85%</td>
                                    <td><button class="btn btn-small">üìä Analyze</button></td>
                                </tr>
                                <tr>
                                    <td>üß† Knowledge Base</td>
                                    <td>0.8 TB</td>
                                    <td>45,128</td>
                                    <td>2025-06-20 13:15</td>
                                    <td>92%</td>
                                    <td><button class="btn btn-small">üîß Optimize</button></td>
                                </tr>
                                <tr>
                                    <td>üìà Analytics</td>
                                    <td>0.3 TB</td>
                                    <td>12,476</td>
                                    <td>2025-06-20 14:25</td>
                                    <td>78%</td>
                                    <td><button class="btn btn-small">üóëÔ∏è Archive</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="right-sidebar">
            <div class="details-panel">
                <h3>üîç Memory Details</h3>
                
                <div class="detail-group">
                    <h4>üìä Current Selection</h4>
                    <div class="detail-row">
                        <span class="detail-label">Type:</span>
                        <span class="detail-value" id="selected-type">Conversation</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">ID:</span>
                        <span class="detail-value" id="selected-id">MEM-2025-001</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Created:</span>
                        <span class="detail-value" id="selected-created">2025-06-20 14:23</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Size:</span>
                        <span class="detail-value" id="selected-size">2.4 KB</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Agent:</span>
                        <span class="detail-value" id="selected-agent">GPT-4 Turbo</span>
                    </div>
                </div>

                <div class="detail-group">
                    <h4>üè∑Ô∏è Tags & Metadata</h4>
                    <div class="memory-tags" id="selected-tags">
                        <span class="memory-tag">AI Conversation</span>
                        <span class="memory-tag">Technical</span>
                        <span class="memory-tag">High Priority</span>
                    </div>
                </div>

                <div class="detail-group">
                    <h4>üìà Performance Metrics</h4>
                    <div class="detail-row">
                        <span class="detail-label">Access Count:</span>
                        <span class="detail-value">847</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Relevance Score:</span>
                        <span class="detail-value">94%</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Last Accessed:</span>
                        <span class="detail-value">5 min ago</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Quality Score:</span>
                        <span class="detail-value">98%</span>
                    </div>
                </div>

                <div class="detail-group">
                    <h4>üîó Related Memories</h4>
                    <div style="font-size: 0.8rem; color: #cccccc; margin-bottom: 0.5rem;">
                        <div>‚Ä¢ Similar conversation (92% match)</div>
                        <div>‚Ä¢ Related knowledge node (87% match)</div>
                        <div>‚Ä¢ Previous interaction (95% match)</div>
                        <div>‚Ä¢ Pattern cluster (78% match)</div>
                    </div>
                    <button class="btn btn-small" style="width: 100%;">üîç Explore Connections</button>
                </div>

                <div class="detail-group">
                    <h4>‚öôÔ∏è Actions</h4>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <button class="btn btn-small">üìù Edit Metadata</button>
                        <button class="btn btn-small">üè∑Ô∏è Add Tags</button>
                        <button class="btn btn-small">üì§ Export</button>
                        <button class="btn btn-small">üóëÔ∏è Archive</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üì§ Export Memory Data</div>
                <button class="close-btn" onclick="closeModal('export-modal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Export Type</label>
                <select class="form-select">
                    <option value="conversations">Conversations Only</option>
                    <option value="knowledge">Knowledge Base</option>
                    <option value="analytics">Analytics Data</option>
                    <option value="full">Complete Memory Export</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Date Range</label>
                <div style="display: flex; gap: 1rem;">
                    <input type="date" class="form-input" value="2025-01-01">
                    <input type="date" class="form-input" value="2025-06-20">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Export Format</label>
                <select class="form-select">
                    <option value="json">JSON</option>
                    <option value="csv">CSV</option>
                    <option value="xml">XML</option>
                    <option value="parquet">Parquet</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Compression</label>
                <select class="form-select">
                    <option value="gzip">GZip</option>
                    <option value="zip">ZIP</option>
                    <option value="none">None</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="startExport()">üì§ Start Export</button>
                <button class="btn btn-secondary" onclick="closeModal('export-modal')">‚ùå Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentSection = 'overview';
        let selectedMemory = null;
        let searchFilters = { type: 'all', dateRange: 'all' };
        let charts = {};

        // Initialize memory portal
        function initMemoryPortal() {
            console.log('üß† Enhanced CSP Memory Portal initialized');
            
            setupEventListeners();
            loadMemoryData();
            initializeCharts();
            startRealTimeUpdates();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('memory-search').addEventListener('input', handleSearch);
            
            // Filter tags
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.addEventListener('click', handleFilterClick);
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', handleKeyboardShortcuts);
        }

        // Show specific section
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to corresponding nav item
            event.target.closest('.nav-item').classList.add('active');
            
            currentSection = sectionId;
            
            // Load section-specific data
            loadSectionData(sectionId);
        }

        // Load section-specific data
        function loadSectionData(sectionId) {
            switch(sectionId) {
                case 'conversations':
                    loadConversations();
                    break;
                case 'knowledge-graph':
                    loadKnowledgeGraph();
                    break;
                case 'timeline':
                    loadTimeline();
                    break;
                case 'analytics':
                    loadAnalytics();
                    break;
                case 'storage':
                    loadStorageData();
                    break;
            }
        }

        // Load memory data
        function loadMemoryData() {
            loadRecentActivity();
            updateMemoryStats();
        }

        // Load recent activity
        function loadRecentActivity() {
            const activities = [
                {
                    timestamp: '2025-06-20 14:30:45',
                    type: 'Conversation',
                    agent: 'GPT-4 Turbo',
                    preview: 'Discussing machine learning optimization strategies...',
                    size: '2.4 KB'
                },
                {
                    timestamp: '2025-06-20 14:25:32',
                    type: 'Knowledge Update',
                    agent: 'Claude-3',
                    preview: 'Added new neural network architecture patterns...',
                    size: '5.1 KB'
                },
                {
                    timestamp: '2025-06-20 14:18:15',
                    type: 'Pattern Recognition',
                    agent: 'Custom AI',
                    preview: 'Identified recurring communication patterns in...',
                    size: '1.8 KB'
                },
                {
                    timestamp: '2025-06-20 14:12:08',
                    type: 'Memory Clustering',
                    agent: 'System',
                    preview: 'Automatically clustered 1,247 related memories...',
                    size: '8.3 KB'
                },
                {
                    timestamp: '2025-06-20 14:05:22',
                    type: 'Conversation',
                    agent: 'GPT-4',
                    preview: 'Technical discussion about CSP architecture...',
                    size: '3.7 KB'
                }
            ];

            const tbody = document.getElementById('recent-activity');
            tbody.innerHTML = activities.map(activity => `
                <tr onclick="selectMemory('${activity.timestamp}')">
                    <td>${activity.timestamp}</td>
                    <td>${activity.type}</td>
                    <td>${activity.agent}</td>
                    <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis;">${activity.preview}</td>
                    <td>${activity.size}</td>
                    <td>
                        <button class="btn btn-small">üëÅÔ∏è View</button>
                        <button class="btn btn-small">üì§ Export</button>
                    </td>
                </tr>
            `).join('');
        }

        // Load conversations
        function loadConversations() {
            const conversations = [
                {
                    id: 'CONV-001',
                    title: 'AI Model Performance Optimization',
                    participants: ['GPT-4 Turbo', 'Claude-3'],
                    messages: 47,
                    duration: '2h 15m',
                    timestamp: '2025-06-20 12:30',
                    tags: ['Technical', 'Performance', 'AI Models'],
                    preview: 'Deep discussion about optimizing transformer architectures for better performance and reduced computational overhead...'
                },
                {
                    id: 'CONV-002',
                    title: 'Natural Language Understanding',
                    participants: ['GPT-4', 'Custom NLP Agent'],
                    messages: 23,
                    duration: '45m',
                    timestamp: '2025-06-20 11:15',
                    tags: ['NLP', 'Understanding', 'Research'],
                    preview: 'Exploring advances in contextual understanding and semantic analysis for improved AI communication...'
                },
                {
                    id: 'CONV-003',
                    title: 'Multi-Agent Coordination Strategies',
                    participants: ['Agent Alpha', 'Agent Beta', 'Coordinator'],
                    messages: 89,
                    duration: '3h 20m',
                    timestamp: '2025-06-20 09:45',
                    tags: ['Coordination', 'Multi-Agent', 'Strategy'],
                    preview: 'Comprehensive analysis of coordination protocols and decision-making frameworks for multi-agent systems...'
                }
            ];

            const container = document.getElementById('conversations-grid');
            container.innerHTML = conversations.map(conv => `
                <div class="memory-card" onclick="selectConversation('${conv.id}')">
                    <div class="memory-header">
                        <div>
                            <div class="memory-title">${conv.title}</div>
                            <div class="memory-meta">
                                ID: ${conv.id} ‚Ä¢ ${conv.messages} messages ‚Ä¢ ${conv.duration}
                            </div>
                        </div>
                        <div class="memory-actions">
                            <button class="btn btn-small">üëÅÔ∏è</button>
                            <button class="btn btn-small">üì§</button>
                        </div>
                    </div>
                    <div class="memory-content">${conv.preview}</div>
                    <div class="memory-tags">
                        ${conv.tags.map(tag => `<span class="memory-tag">${tag}</span>`).join('')}
                    </div>
                    <div class="memory-stats">
                        <span>üë• ${conv.participants.join(', ')}</span>
                        <span>‚è∞ ${conv.timestamp}</span>
                    </div>
                </div>
            `).join('');
        }

        // Load knowledge graph
        function loadKnowledgeGraph() {
            const container = document.getElementById('knowledge-graph-container');
            container.innerHTML = ''; // Clear existing content
            
            // Create nodes
            const nodes = [
                { id: 'ai', label: 'AI', x: 250, y: 200 },
                { id: 'ml', label: 'ML', x: 150, y: 120 },
                { id: 'nlp', label: 'NLP', x: 350, y: 120 },
                { id: 'deep', label: 'Deep Learning', x: 100, y: 280 },
                { id: 'neural', label: 'Neural Networks', x: 200, y: 350 },
                { id: 'transformer', label: 'Transformers', x: 400, y: 280 },
                { id: 'gpt', label: 'GPT', x: 450, y: 180 },
                { id: 'bert', label: 'BERT', x: 300, y: 50 }
            ];
            
            const connections = [
                { from: 'ai', to: 'ml' },
                { from: 'ai', to: 'nlp' },
                { from: 'ml', to: 'deep' },
                { from: 'ml', to: 'neural' },
                { from: 'nlp', to: 'transformer' },
                { from: 'nlp', to: 'gpt' },
                { from: 'nlp', to: 'bert' },
                { from: 'deep', to: 'neural' },
                { from: 'transformer', to: 'gpt' },
                { from: 'transformer', to: 'bert' }
            ];
            
            // Draw connections first
            connections.forEach(conn => {
                const fromNode = nodes.find(n => n.id === conn.from);
                const toNode = nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const line = document.createElement('div');
                    line.className = 'graph-connection';
                    
                    const dx = toNode.x - fromNode.x;
                    const dy = toNode.y - fromNode.y;
                    const length = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    line.style.left = fromNode.x + 'px';
                    line.style.top = fromNode.y + 'px';
                    line.style.width = length + 'px';
                    line.style.transform = `rotate(${angle}deg)`;
                    
                    container.appendChild(line);
                }
            });
            
            // Draw nodes
            nodes.forEach(node => {
                const element = document.createElement('div');
                element.className = 'graph-node';
                element.style.left = (node.x - 30) + 'px';
                element.style.top = (node.y - 30) + 'px';
                element.textContent = node.label;
                element.title = `Knowledge Node: ${node.label}`;
                element.onclick = () => selectKnowledgeNode(node.id);
                
                container.appendChild(element);
            });
        }

        // Load timeline
        function loadTimeline() {
            const timelineItems = [
                {
                    id: 'TL-001',
                    timestamp: '2025-06-20 14:30',
                    type: 'Major Conversation',
                    title: 'AI Architecture Discussion',
                    description: 'Extended technical discussion between multiple AI agents about system architecture improvements.',
                    participants: ['GPT-4', 'Claude-3', 'Custom Agent']
                },
                {
                    id: 'TL-002',
                    timestamp: '2025-06-20 12:15',
                    type: 'Knowledge Update',
                    title: 'Machine Learning Database Expansion',
                    description: 'Significant addition to the knowledge base with new ML research findings and best practices.',
                    participants: ['Research Agent', 'Knowledge Curator']
                },
                {
                    id: 'TL-003',
                    timestamp: '2025-06-20 10:45',
                    type: 'Pattern Discovery',
                    title: 'Communication Pattern Analysis',
                    description: 'AI system discovered recurring patterns in agent communications, leading to optimization opportunities.',
                    participants: ['Pattern Recognition AI']
                },
                {
                    id: 'TL-004',
                    timestamp: '2025-06-20 08:30',
                    type: 'System Optimization',
                    title: 'Memory Clustering Enhancement',
                    description: 'Automated memory clustering process improved organization of stored conversations and knowledge.',
                    participants: ['System Optimizer']
                }
            ];

            const container = document.getElementById('timeline-container');
            container.innerHTML = `
                <div class="timeline-line"></div>
                ${timelineItems.map((item, index) => `
                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                            <div class="memory-header">
                                <div>
                                    <div class="memory-title">${item.title}</div>
                                    <div class="memory-meta">${item.type} ‚Ä¢ ${item.timestamp}</div>
                                </div>
                            </div>
                            <div class="memory-content">${item.description}</div>
                            <div class="memory-stats">
                                <span>üë• ${item.participants.join(', ')}</span>
                                <span>üÜî ${item.id}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Initialize charts
        function initializeCharts() {
            initMemoryGrowthChart();
            initMemoryTypesChart();
            initAccessPatternsChart();
            initAgentUsageChart();
        }

        // Memory growth chart
        function initMemoryGrowthChart() {
            const ctx = document.getElementById('memoryGrowthChart').getContext('2d');
            charts.memoryGrowth = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Total Memories',
                        data: [45000, 52000, 61000, 73000, 89000, 127482],
                        borderColor: '#9c27b0',
                        backgroundColor: 'rgba(156, 39, 176, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Knowledge Nodes',
                        data: [23000, 27000, 34000, 45000, 62000, 89342],
                        borderColor: '#e91e63',
                        backgroundColor: 'rgba(233, 30, 99, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#cccccc' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#cccccc' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    }
                }
            });
        }

        // Memory types chart
        function initMemoryTypesChart() {
            const ctx = document.getElementById('memoryTypesChart').getContext('2d');
            charts.memoryTypes = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Conversations', 'Knowledge Base', 'Patterns', 'Analytics', 'System Data'],
                    datasets: [{
                        data: [45, 28, 12, 10, 5],
                        backgroundColor: [
                            '#9c27b0',
                            '#e91e63',
                            '#ff5722',
                            '#ff9800',
                            '#ffc107'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });
        }

        // Access patterns chart
        function initAccessPatternsChart() {
            const ctx = document.getElementById('accessPatternsChart').getContext('2d');
            charts.accessPatterns = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                    datasets: [{
                        label: 'Memory Access',
                        data: [1200, 800, 2400, 3800, 4200, 2800],
                        backgroundColor: 'rgba(156, 39, 176, 0.7)',
                        borderColor: '#9c27b0',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#cccccc' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#cccccc' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    }
                }
            });
        }

        // Agent usage chart
        function initAgentUsageChart() {
            const ctx = document.getElementById('agentUsageChart').getContext('2d');
            charts.agentUsage = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Storage', 'Retrieval', 'Analysis', 'Generation', 'Learning'],
                    datasets: [{
                        label: 'GPT-4',
                        data: [85, 92, 78, 96, 88],
                        borderColor: '#9c27b0',
                        backgroundColor: 'rgba(156, 39, 176, 0.2)',
                        pointBackgroundColor: '#9c27b0'
                    }, {
                        label: 'Claude-3',
                        data: [78, 88, 95, 82, 90],
                        borderColor: '#e91e63',
                        backgroundColor: 'rgba(233, 30, 99, 0.2)',
                        pointBackgroundColor: '#e91e63'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    },
                    scales: {
                        r: {
                            ticks: { color: '#cccccc' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: '#cccccc' }
                        }
                    }
                }
            });
        }

        // Update memory statistics
        function updateMemoryStats() {
            const stats = {
                totalMemories: Math.floor(Math.random() * 1000) + 127000,
                memorySize: (Math.random() * 0.5 + 2.0).toFixed(1) + 'TB',
                activeConversations: Math.floor(Math.random() * 100) + 1200,
                knowledgeNodes: Math.floor(Math.random() * 1000) + 89000
            };

            document.getElementById('total-memories').textContent = stats.totalMemories.toLocaleString();
            document.getElementById('memory-size').textContent = stats.memorySize;
            document.getElementById('active-conversations').textContent = stats.activeConversations.toLocaleString();
            document.getElementById('knowledge-nodes').textContent = stats.knowledgeNodes.toLocaleString();
        }

        // Start real-time updates
        function startRealTimeUpdates() {
            setInterval(updateMemoryStats, 10000);
            setInterval(updateCharts, 30000);
        }

        // Update charts with new data
        function updateCharts() {
            Object.values(charts).forEach(chart => {
                if (chart && chart.data && chart.data.datasets) {
                    chart.data.datasets.forEach(dataset => {
                        if (dataset.data) {
                            dataset.data = dataset.data.map(value => 
                                typeof value === 'number' ? 
                                Math.max(0, value + (Math.random() - 0.5) * 10) : value
                            );
                        }
                    });
                    chart.update('none');
                }
            });
        }

        // Handle search
        function handleSearch(event) {
            const query = event.target.value.toLowerCase();
            console.log('üîç Searching memories:', query);
            
            // Filter memories based on search query
            filterMemories(query);
        }

        // Handle filter clicks
        function handleFilterClick(event) {
            // Remove active class from all filters
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            
            // Add active class to clicked filter
            event.target.classList.add('active');
            
            const filterType = event.target.dataset.filter;
            searchFilters.type = filterType;
            
            console.log('üè∑Ô∏è Filter applied:', filterType);
            applyFilters();
        }

        // Apply filters to memory display
        function applyFilters() {
            // Filter implementation based on current filters
            console.log('Applying filters:', searchFilters);
        }

        // Filter memories based on search
        function filterMemories(query) {
            // Implementation for filtering memories
            console.log('Filtering memories with query:', query);
        }

        // Select memory for details
        function selectMemory(memoryId) {
            selectedMemory = memoryId;
            updateDetailsPanel(memoryId);
            console.log('üìù Selected memory:', memoryId);
        }

        // Select conversation
        function selectConversation(conversationId) {
            selectedMemory = conversationId;
            updateDetailsPanel(conversationId);
            console.log('üí¨ Selected conversation:', conversationId);
        }

        // Select knowledge node
        function selectKnowledgeNode(nodeId) {
            selectedMemory = nodeId;
            updateDetailsPanel(nodeId);
            console.log('üß† Selected knowledge node:', nodeId);
        }

        // Update details panel
        function updateDetailsPanel(itemId) {
            // Update the right sidebar with selected item details
            document.getElementById('selected-id').textContent = itemId;
            document.getElementById('selected-type').textContent = 'Selected Item';
            document.getElementById('selected-created').textContent = new Date().toLocaleString();
            document.getElementById('selected-size').textContent = (Math.random() * 10 + 1).toFixed(1) + ' KB';
            document.getElementById('selected-agent').textContent = 'GPT-4 Turbo';
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Start export process
        function startExport() {
            console.log('üì§ Starting memory export...');
            
            // Show progress
            const progressHtml = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üì¶</div>
                    <h3 style="color: #9c27b0; margin-bottom: 1rem;">Preparing Export...</h3>
                    <div class="progress-bar" style="width: 300px; margin: 0 auto;">
                        <div class="progress-fill" style="width: 0%; transition: width 2s ease;" id="export-progress">0%</div>
                    </div>
                    <div style="margin-top: 1rem; color: #cccccc;">Processing memories and formatting data...</div>
                </div>
            `;
            
            document.querySelector('#export-modal .modal-content').innerHTML = progressHtml;
            
            // Simulate export progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(progressInterval);
                    setTimeout(() => {
                        document.querySelector('#export-modal .modal-content').innerHTML = `
                            <div style="text-align: center; padding: 2rem;">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
                                <h3 style="color: #00ff88; margin-bottom: 1rem;">Export Complete!</h3>
                                <p style="color: #cccccc; margin-bottom: 2rem;">Your memory data has been successfully exported.</p>
                                <button class="btn btn-primary" onclick="closeModal('export-modal')">üéâ Close</button>
                            </div>
                        `;
                    }, 1000);
                }
                document.getElementById('export-progress').style.width = progress + '%';
                document.getElementById('export-progress').textContent = Math.floor(progress) + '%';
            }, 200);
        }

        // Handle keyboard shortcuts
        function handleKeyboardShortcuts(event) {
            if (event.ctrlKey || event.metaKey) {
                switch(event.key) {
                    case 'f':
                        event.preventDefault();
                        document.getElementById('memory-search').focus();
                        break;
                    case 'e':
                        event.preventDefault();
                        openModal('export-modal');
                        break;
                    case '1':
                        event.preventDefault();
                        showSection('overview');
                        break;
                    case '2':
                        event.preventDefault();
                        showSection('conversations');
                        break;
                    case '3':
                        event.preventDefault();
                        showSection('knowledge-graph');
                        break;
                }
            }
            
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initMemoryPortal);
    </script>
</body>
</html>